[
  {
    "type": "system",
    "subtype": "init",
    "cwd": "/Users/maitrikpatel/Documents/Automate With Maitrik/Algotrading",
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "tools": [
      "Task",
      "TaskOutput",
      "Bash",
      "Glob",
      "Grep",
      "ExitPlanMode",
      "Read",
      "Edit",
      "Write",
      "NotebookEdit",
      "WebFetch",
      "TodoWrite",
      "WebSearch",
      "KillShell",
      "AskUserQuestion",
      "Skill",
      "EnterPlanMode",
      "mcp__playwright__browser_close",
      "mcp__playwright__browser_resize",
      "mcp__playwright__browser_console_messages",
      "mcp__playwright__browser_handle_dialog",
      "mcp__playwright__browser_evaluate",
      "mcp__playwright__browser_file_upload",
      "mcp__playwright__browser_fill_form",
      "mcp__playwright__browser_install",
      "mcp__playwright__browser_press_key",
      "mcp__playwright__browser_type",
      "mcp__playwright__browser_navigate",
      "mcp__playwright__browser_navigate_back",
      "mcp__playwright__browser_network_requests",
      "mcp__playwright__browser_run_code",
      "mcp__playwright__browser_take_screenshot",
      "mcp__playwright__browser_snapshot",
      "mcp__playwright__browser_click",
      "mcp__playwright__browser_drag",
      "mcp__playwright__browser_hover",
      "mcp__playwright__browser_select_option",
      "mcp__playwright__browser_tabs",
      "mcp__playwright__browser_wait_for"
    ],
    "mcp_servers": [
      {
        "name": "playwright",
        "status": "connected"
      }
    ],
    "model": "claude-sonnet-4-5-20250929",
    "permissionMode": "bypassPermissions",
    "slash_commands": [
      "classify_issue",
      "tools",
      "test",
      "feature",
      "start",
      "review",
      "commit",
      "prime",
      "chore",
      "pull_request",
      "bug",
      "patch",
      "conditional_docs",
      "resolve_failed_test",
      "classify_adw",
      "resolve_failed_e2e_test",
      "install",
      "test_e2e",
      "prepare_app",
      "generate_branch_name",
      "implement",
      "document",
      "e2e:test_account_summary",
      "e2e:test_api_health",
      "e2e:test_dashboard_chart_load",
      "e2e:test_account_page",
      "e2e:test_market_headlines",
      "e2e:test_trading_dashboard",
      "e2e:test_advanced_chart",
      "compact",
      "context",
      "cost",
      "init",
      "pr-comments",
      "release-notes",
      "review",
      "security-review"
    ],
    "apiKeySource": "ANTHROPIC_API_KEY",
    "claude_code_version": "2.1.9",
    "output_style": "default",
    "agents": [
      "Bash",
      "general-purpose",
      "statusline-setup",
      "Explore",
      "Plan"
    ],
    "skills": [],
    "plugins": [],
    "uuid": "6b505cc9-3b5c-4c3f-bc8b-9eeef90e56a3"
  },
  {
    "type": "assistant",
    "message": {
      "model": "claude-sonnet-4-5-20250929",
      "id": "msg_01SNuvFQvwRQyPmoCuWWrC8L",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "text",
          "text": "I'll create a git commit for the advanced trading chart feature implementation."
        }
      ],
      "stop_reason": null,
      "stop_sequence": null,
      "usage": {
        "input_tokens": 3,
        "cache_creation_input_tokens": 10068,
        "cache_read_input_tokens": 13916,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 10068,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 5,
        "service_tier": "standard"
      },
      "context_management": null
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "fde56212-660d-453b-a5f8-59a24e37701f"
  },
  {
    "type": "assistant",
    "message": {
      "model": "claude-sonnet-4-5-20250929",
      "id": "msg_01SNuvFQvwRQyPmoCuWWrC8L",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "tool_use",
          "id": "toolu_01SuAFVJSmzPUwP9KitGZ2HB",
          "name": "Bash",
          "input": {
            "command": "git diff HEAD",
            "description": "Show changes made for the commit"
          }
        }
      ],
      "stop_reason": null,
      "stop_sequence": null,
      "usage": {
        "input_tokens": 3,
        "cache_creation_input_tokens": 10068,
        "cache_read_input_tokens": 13916,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 10068,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 5,
        "service_tier": "standard"
      },
      "context_management": null
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "40c1b012-8893-403f-b6b0-93c2425c5766"
  },
  {
    "type": "assistant",
    "message": {
      "model": "claude-sonnet-4-5-20250929",
      "id": "msg_01SNuvFQvwRQyPmoCuWWrC8L",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "tool_use",
          "id": "toolu_017ivhVwi6jwx6EgKFwEKTAj",
          "name": "Bash",
          "input": {
            "command": "git status",
            "description": "Check git status for untracked files"
          }
        }
      ],
      "stop_reason": null,
      "stop_sequence": null,
      "usage": {
        "input_tokens": 3,
        "cache_creation_input_tokens": 10068,
        "cache_read_input_tokens": 13916,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 10068,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 5,
        "service_tier": "standard"
      },
      "context_management": null
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "f38f4413-274f-4f48-9b50-d8105c1b0d10"
  },
  {
    "type": "user",
    "message": {
      "role": "user",
      "content": [
        {
          "tool_use_id": "toolu_01SuAFVJSmzPUwP9KitGZ2HB",
          "type": "tool_result",
          "content": "diff --git a/app/client/src/app/chart.js b/app/client/src/app/chart.js\nindex 178e8a8..f2a759e 100644\n--- a/app/client/src/app/chart.js\n+++ b/app/client/src/app/chart.js\n@@ -7,10 +7,17 @@ const CHART_COLORS = {\n   grid: 'rgba(228, 228, 231, 0.3)',\r\n   text: '#71717A',         // Muted foreground\r\n   background: 'transparent',\r\n+  volumeBullish: 'rgba(34, 197, 94, 0.5)',  // Semi-transparent green\r\n+  volumeBearish: 'rgba(239, 68, 68, 0.5)',  // Semi-transparent red\r\n+  line: '#3B82F6',         // Blue for line chart\r\n+  areaFill: 'rgba(59, 130, 246, 0.2)',      // Semi-transparent blue\r\n };\r\n \r\n-export function drawChart(chartData, p, g, divName) {\r\n-  const trace = {\r\n+/**\r\n+ * Create a candlestick trace\r\n+ */\r\n+function createCandlestickTrace(chartData, pairName) {\r\n+  return {\r\n     x: chartData.time,\r\n     close: chartData.mid_c,\r\n     high: chartData.mid_h,\r\n@@ -19,18 +26,157 @@ export function drawChart(chartData, p, g, divName) {\n     type: 'candlestick',\r\n     xaxis: 'x',\r\n     yaxis: 'y',\r\n-    increasing: { \r\n-      line: { width: 1, color: CHART_COLORS.bullish }, \r\n-      fillcolor: CHART_COLORS.bullish \r\n+    increasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bullish },\r\n+      fillcolor: CHART_COLORS.bullish\r\n     },\r\n-    decreasing: { \r\n-      line: { width: 1, color: CHART_COLORS.bearish }, \r\n-      fillcolor: CHART_COLORS.bearish \r\n+    decreasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bearish },\r\n+      fillcolor: CHART_COLORS.bearish\r\n     },\r\n-    name: p,\r\n+    name: pairName,\r\n   };\r\n+}\r\n+\r\n+/**\r\n+ * Create an OHLC trace\r\n+ */\r\n+function createOHLCTrace(chartData, pairName) {\r\n+  return {\r\n+    x: chartData.time,\r\n+    close: chartData.mid_c,\r\n+    high: chartData.mid_h,\r\n+    low: chartData.mid_l,\r\n+    open: chartData.mid_o,\r\n+    type: 'ohlc',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y',\r\n+    increasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bullish }\r\n+    },\r\n+    decreasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bearish }\r\n+    },\r\n+    name: pairName,\r\n+  };\r\n+}\r\n+\r\n+/**\r\n+ * Create a line trace (uses close prices)\r\n+ */\r\n+function createLineTrace(chartData, pairName) {\r\n+  return {\r\n+    x: chartData.time,\r\n+    y: chartData.mid_c,\r\n+    type: 'scatter',\r\n+    mode: 'lines',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y',\r\n+    line: {\r\n+      color: CHART_COLORS.line,\r\n+      width: 2,\r\n+    },\r\n+    name: pairName,\r\n+  };\r\n+}\r\n \r\n-  const data = [trace];\r\n+/**\r\n+ * Create an area trace (line with filled area below)\r\n+ */\r\n+function createAreaTrace(chartData, pairName) {\r\n+  return {\r\n+    x: chartData.time,\r\n+    y: chartData.mid_c,\r\n+    type: 'scatter',\r\n+    mode: 'lines',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y',\r\n+    fill: 'tozeroy',\r\n+    fillcolor: CHART_COLORS.areaFill,\r\n+    line: {\r\n+      color: CHART_COLORS.line,\r\n+      width: 2,\r\n+    },\r\n+    name: pairName,\r\n+  };\r\n+}\r\n+\r\n+/**\r\n+ * Create the main price trace based on chart type\r\n+ */\r\n+function createPriceTrace(chartData, pairName, chartType) {\r\n+  switch (chartType) {\r\n+    case 'ohlc':\r\n+      return createOHLCTrace(chartData, pairName);\r\n+    case 'line':\r\n+      return createLineTrace(chartData, pairName);\r\n+    case 'area':\r\n+      return createAreaTrace(chartData, pairName);\r\n+    case 'candlestick':\r\n+    default:\r\n+      return createCandlestickTrace(chartData, pairName);\r\n+  }\r\n+}\r\n+\r\n+/**\r\n+ * Create volume trace with color coding based on price direction\r\n+ * Note: OpenFX API may not provide volume data. If not available,\r\n+ * we calculate a proxy volume based on candle range (high - low).\r\n+ */\r\n+function createVolumeTrace(chartData) {\r\n+  const volumes = [];\r\n+  const colors = [];\r\n+\r\n+  for (let i = 0; i < chartData.time.length; i++) {\r\n+    // Use actual volume if available, otherwise calculate proxy from price range\r\n+    const volume = chartData.volume?.[i] ??\r\n+      Math.abs(chartData.mid_h[i] - chartData.mid_l[i]) * 1000000;\r\n+    volumes.push(volume);\r\n+\r\n+    // Color based on whether close > open (bullish) or close < open (bearish)\r\n+    const isBullish = chartData.mid_c[i] >= chartData.mid_o[i];\r\n+    colors.push(isBullish ? CHART_COLORS.volumeBullish : CHART_COLORS.volumeBearish);\r\n+  }\r\n+\r\n+  return {\r\n+    x: chartData.time,\r\n+    y: volumes,\r\n+    type: 'bar',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y2',\r\n+    marker: {\r\n+      color: colors,\r\n+    },\r\n+    name: 'Volume',\r\n+    hovertemplate: 'Volume: %{y:,.0f}<extra></extra>',\r\n+  };\r\n+}\r\n+\r\n+/**\r\n+ * Draw the chart with support for multiple chart types, volume subplot, and advanced interactions.\r\n+ * @param {Object} chartData - The chart data with time, mid_o, mid_h, mid_l, mid_c, and optionally volume\r\n+ * @param {string} p - Pair name (e.g., \"EUR_USD\")\r\n+ * @param {string} g - Granularity (e.g., \"H1\")\r\n+ * @param {string} divName - The ID of the div element to render the chart in\r\n+ * @param {string} chartType - Chart type: 'candlestick', 'ohlc', 'line', or 'area'\r\n+ * @param {boolean} showVolume - Whether to show the volume subplot\r\n+ */\r\n+export function drawChart(chartData, p, g, divName, chartType = 'candlestick', showVolume = false) {\r\n+  const data = [];\r\n+\r\n+  // Add main price trace\r\n+  const priceTrace = createPriceTrace(chartData, p, chartType);\r\n+  data.push(priceTrace);\r\n+\r\n+  // Add volume trace if enabled\r\n+  if (showVolume) {\r\n+    const volumeTrace = createVolumeTrace(chartData);\r\n+    data.push(volumeTrace);\r\n+  }\r\n+\r\n+  // Calculate y-axis domain based on whether volume is shown\r\n+  const priceYAxisDomain = showVolume ? [0.25, 1] : [0, 1];\r\n+  const volumeYAxisDomain = [0, 0.2];\r\n \r\n   const layout = {\r\n     title: {\r\n@@ -48,7 +194,7 @@ export function drawChart(chartData, p, g, divName) {\n     showlegend: false,\r\n     margin: {\r\n       l: 60,\r\n-      r: 20,\r\n+      r: 60,\r\n       b: 50,\r\n       t: 50,\r\n       pad: 4,\r\n@@ -69,6 +215,13 @@ export function drawChart(chartData, p, g, divName) {\n       },\r\n       linecolor: CHART_COLORS.grid,\r\n       linewidth: 1,\r\n+      // Crosshair spike line configuration\r\n+      showspikes: true,\r\n+      spikemode: 'across',\r\n+      spikesnap: 'cursor',\r\n+      spikecolor: '#71717A',\r\n+      spikethickness: 1,\r\n+      spikedash: 'dot',\r\n     },\r\n     yaxis: {\r\n       side: 'right',\r\n@@ -83,7 +236,16 @@ export function drawChart(chartData, p, g, divName) {\n       linecolor: CHART_COLORS.grid,\r\n       linewidth: 1,\r\n       tickformat: '.5f',\r\n+      domain: priceYAxisDomain,\r\n+      // Crosshair spike line configuration\r\n+      showspikes: true,\r\n+      spikemode: 'across',\r\n+      spikesnap: 'cursor',\r\n+      spikecolor: '#71717A',\r\n+      spikethickness: 1,\r\n+      spikedash: 'dot',\r\n     },\r\n+    // Configure hover mode for crosshair effect\r\n     hovermode: 'x unified',\r\n     hoverlabel: {\r\n       bgcolor: '#18181B',\r\n@@ -94,8 +256,35 @@ export function drawChart(chartData, p, g, divName) {\n         color: '#FAFAFA',\r\n       },\r\n     },\r\n+    // Enable drag mode for panning\r\n+    dragmode: 'pan',\r\n   };\r\n \r\n+  // Add volume y-axis if showing volume\r\n+  if (showVolume) {\r\n+    layout.yaxis2 = {\r\n+      side: 'right',\r\n+      showgrid: false,\r\n+      tickfont: {\r\n+        family: 'JetBrains Mono, monospace',\r\n+        size: 10,\r\n+        color: CHART_COLORS.text,\r\n+      },\r\n+      linecolor: CHART_COLORS.grid,\r\n+      linewidth: 1,\r\n+      domain: volumeYAxisDomain,\r\n+      tickformat: '.2s',\r\n+      title: {\r\n+        text: 'Vol',\r\n+        font: {\r\n+          size: 10,\r\n+          color: CHART_COLORS.text,\r\n+        },\r\n+        standoff: 5,\r\n+      },\r\n+    };\r\n+  }\r\n+\r\n   const config = {\r\n     responsive: true,\r\n     displayModeBar: true,\r\n@@ -105,10 +294,14 @@ export function drawChart(chartData, p, g, divName) {\n       format: 'png',\r\n       filename: `${p}_${g}_chart`,\r\n     },\r\n+    // Enable scroll zoom for mouse wheel zoom\r\n+    scrollZoom: true,\r\n+    // Double-click to reset zoom\r\n+    doubleClick: 'reset',\r\n   };\r\n \r\n   Plotly.newPlot(divName, data, layout, config);\r\n-  \r\n+\r\n   // Resize to fit container\r\n   const chartElement = document.getElementById(divName);\r\n   if (chartElement) {\r\ndiff --git a/app/client/src/app/data.js b/app/client/src/app/data.js\nindex a7ed3b7..9a2ca22 100644\n--- a/app/client/src/app/data.js\n+++ b/app/client/src/app/data.js\n@@ -14,6 +14,83 @@ export const COUNTS = [\n     { key: \"200\", text: \"200\", value:  \"200\" }\r\n ];\r\n \r\n+// Chart type options for the chart type selector\r\n+export const CHART_TYPES = [\r\n+    { key: \"candlestick\", text: \"Candlestick\", value: \"candlestick\" },\r\n+    { key: \"ohlc\", text: \"OHLC\", value: \"ohlc\" },\r\n+    { key: \"line\", text: \"Line\", value: \"line\" },\r\n+    { key: \"area\", text: \"Area\", value: \"area\" }\r\n+];\r\n+\r\n+// Date range presets for quick time navigation\r\n+export const DATE_RANGES = [\r\n+    { key: \"1D\", text: \"1D\", value: \"1D\" },\r\n+    { key: \"5D\", text: \"5D\", value: \"5D\" },\r\n+    { key: \"1M\", text: \"1M\", value: \"1M\" },\r\n+    { key: \"3M\", text: \"3M\", value: \"3M\" },\r\n+    { key: \"6M\", text: \"6M\", value: \"6M\" },\r\n+    { key: \"YTD\", text: \"YTD\", value: \"YTD\" },\r\n+    { key: \"1Y\", text: \"1Y\", value: \"1Y\" },\r\n+    { key: \"All\", text: \"All\", value: \"All\" }\r\n+];\r\n+\r\n+// Timeframe to seconds mapping (matches server TFS)\r\n+const GRANULARITY_SECONDS = {\r\n+    \"M5\": 300,\r\n+    \"M15\": 900,\r\n+    \"H1\": 3600,\r\n+    \"H4\": 14400,\r\n+    \"D\": 86400\r\n+};\r\n+\r\n+/**\r\n+ * Calculate the number of candles needed for a given date range and granularity.\r\n+ * @param {string} dateRange - Date range preset (1D, 5D, 1M, 3M, 6M, YTD, 1Y, All)\r\n+ * @param {string} granularity - Timeframe (M5, M15, H1, H4, D)\r\n+ * @returns {number} Number of candles to fetch\r\n+ */\r\n+export function calculateCandleCount(dateRange, granularity) {\r\n+    const secondsPerGranularity = GRANULARITY_SECONDS[granularity] || 3600;\r\n+    const now = new Date();\r\n+    let startDate;\r\n \r\n+    switch (dateRange) {\r\n+        case \"1D\":\r\n+            startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);\r\n+            break;\r\n+        case \"5D\":\r\n+            startDate = new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000);\r\n+            break;\r\n+        case \"1M\":\r\n+            startDate = new Date(now);\r\n+            startDate.setMonth(startDate.getMonth() - 1);\r\n+            break;\r\n+        case \"3M\":\r\n+            startDate = new Date(now);\r\n+            startDate.setMonth(startDate.getMonth() - 3);\r\n+            break;\r\n+        case \"6M\":\r\n+            startDate = new Date(now);\r\n+            startDate.setMonth(startDate.getMonth() - 6);\r\n+            break;\r\n+        case \"YTD\":\r\n+            startDate = new Date(now.getFullYear(), 0, 1);\r\n+            break;\r\n+        case \"1Y\":\r\n+            startDate = new Date(now);\r\n+            startDate.setFullYear(startDate.getFullYear() - 1);\r\n+            break;\r\n+        case \"All\":\r\n+            // Return a large number for \"All\" to get maximum available data\r\n+            return 1000;\r\n+        default:\r\n+            return 100;\r\n+    }\r\n \r\n+    // Calculate the number of seconds between start and now\r\n+    const durationSeconds = (now.getTime() - startDate.getTime()) / 1000;\r\n \r\n+    // Calculate candle count and ensure minimum of 10 and maximum of 1000\r\n+    const candleCount = Math.floor(durationSeconds / secondsPerGranularity);\r\n+    return Math.max(10, Math.min(1000, candleCount));\r\n+}\r\ndiff --git a/app/client/src/components/PriceChart.jsx b/app/client/src/components/PriceChart.jsx\nindex 6a0389f..d943077 100644\n--- a/app/client/src/components/PriceChart.jsx\n+++ b/app/client/src/components/PriceChart.jsx\n@@ -1,22 +1,28 @@\n import React, { useEffect } from 'react';\n import Select from './Select';\n-import { COUNTS } from '../app/data';\n+import { COUNTS, CHART_TYPES, DATE_RANGES } from '../app/data';\n import { drawChart } from '../app/chart';\n-import { LineChart } from 'lucide-react';\n+import { LineChart, BarChart2 } from 'lucide-react';\n \n-function PriceChart({ \n-  priceData, \n-  selectedPair, \n+function PriceChart({\n+  priceData,\n+  selectedPair,\n   selectedGranularity,\n-  selectedCount, \n-  handleCountChange \n+  selectedCount,\n+  handleCountChange,\n+  chartType,\n+  onChartTypeChange,\n+  showVolume,\n+  onVolumeToggle,\n+  selectedDateRange,\n+  onDateRangeChange\n }) {\n   useEffect(() => {\n     if (priceData) {\n-      drawChart(priceData, selectedPair, selectedGranularity, 'chartDiv');\n+      drawChart(priceData, selectedPair, selectedGranularity, 'chartDiv', chartType, showVolume);\n     }\n-  }, [priceData, selectedPair, selectedGranularity]);\n-  \n+  }, [priceData, selectedPair, selectedGranularity, chartType, showVolume]);\n+\n   return (\n     <div className=\"card animate-fade-in\">\n       {/* Header */}\n@@ -33,9 +39,21 @@ function PriceChart({\n               </p>\n             </div>\n           </div>\n-          \n+\n           {/* Chart Controls */}\n-          <div className=\"flex items-center gap-3\">\n+          <div className=\"flex items-center gap-3 flex-wrap\">\n+            {/* Chart Type Selector */}\n+            <Select\n+              name=\"chartType\"\n+              title=\"Chart Type\"\n+              options={CHART_TYPES}\n+              defaultValue={chartType}\n+              onSelected={onChartTypeChange}\n+              hideLabel\n+              className=\"w-32\"\n+            />\n+\n+            {/* Candle Count Selector */}\n             <Select\n               name=\"numrows\"\n               title=\"Candles\"\n@@ -45,14 +63,48 @@ function PriceChart({\n               hideLabel\n               className=\"w-24\"\n             />\n+\n+            {/* Volume Toggle */}\n+            <button\n+              onClick={onVolumeToggle}\n+              className={`inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n+                showVolume\n+                  ? 'bg-primary text-primary-foreground'\n+                  : 'bg-muted text-muted-foreground hover:bg-muted/80'\n+              }`}\n+              title={showVolume ? 'Hide Volume' : 'Show Volume'}\n+            >\n+              <BarChart2 className=\"h-4 w-4\" />\n+              <span className=\"hidden sm:inline\">Vol</span>\n+            </button>\n+          </div>\n+        </div>\n+\n+        {/* Date Range Buttons */}\n+        <div className=\"mt-4 pt-4 border-t border-border\">\n+          <div className=\"flex items-center gap-2 flex-wrap\">\n+            <span className=\"text-xs text-muted-foreground mr-2\">Range:</span>\n+            {DATE_RANGES.map((range) => (\n+              <button\n+                key={range.key}\n+                onClick={() => onDateRangeChange(range.value)}\n+                className={`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${\n+                  selectedDateRange === range.value\n+                    ? 'bg-primary text-primary-foreground'\n+                    : 'bg-muted text-muted-foreground hover:bg-muted/80 hover:text-foreground'\n+                }`}\n+              >\n+                {range.text}\n+              </button>\n+            ))}\n           </div>\n         </div>\n       </div>\n-      \n+\n       {/* Chart Container */}\n       <div className=\"p-4\">\n-        <div \n-          id=\"chartDiv\" \n+        <div\n+          id=\"chartDiv\"\n           className=\"w-full rounded-lg bg-muted/30 min-h-[500px]\"\n           style={{ height: 'calc(100vh - 450px)' }}\n         />\ndiff --git a/app/client/src/pages/Dashboard.jsx b/app/client/src/pages/Dashboard.jsx\nindex 3304750..18685fc 100644\n--- a/app/client/src/pages/Dashboard.jsx\n+++ b/app/client/src/pages/Dashboard.jsx\n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n import endPoints from '../app/api';\n-import { COUNTS } from '../app/data';\n+import { COUNTS, calculateCandleCount } from '../app/data';\n import Button from '../components/Button';\n import PriceChart from '../components/PriceChart';\n import Select from '../components/Select';\n@@ -18,15 +18,37 @@ function Dashboard() {\n   const [loadingData, setLoadingData] = useState(false);\n   const [error, setError] = useState(null);\n \n+  // New state for advanced chart features\n+  const [chartType, setChartType] = useState('candlestick');\n+  const [showVolume, setShowVolume] = useState(false);\n+  const [selectedDateRange, setSelectedDateRange] = useState(null);\n+\n   useEffect(() => {\n     loadOptions();\n   }, []);\n \n   const handleCountChange = (count) => {\n     setSelectedCount(count);\n+    setSelectedDateRange(null); // Clear date range when manually setting count\n     loadPrices(count);\n   };\n \n+  const handleChartTypeChange = (type) => {\n+    setChartType(type);\n+  };\n+\n+  const handleVolumeToggle = () => {\n+    setShowVolume(!showVolume);\n+  };\n+\n+  const handleDateRangeChange = (dateRange) => {\n+    setSelectedDateRange(dateRange);\n+    // Calculate the appropriate candle count based on date range and granularity\n+    const candleCount = calculateCandleCount(dateRange, selectedGran);\n+    setSelectedCount(String(candleCount));\n+    loadPrices(String(candleCount));\n+  };\n+\n   const loadOptions = async () => {\n     const data = await endPoints.options();\n     setOptions(data);\n@@ -117,7 +139,7 @@ function Dashboard() {\n         <div className=\"flex flex-col md:flex-row items-start md:items-end gap-4 flex-wrap\">\n           {/* Pair & Granularity Selectors */}\n           <div className=\"flex flex-wrap items-end gap-4\">\n-            <Select \n+            <Select\n               name=\"Currency\"\n               title=\"Currency Pair\"\n               options={options.pairs}\n@@ -125,7 +147,7 @@ function Dashboard() {\n               onSelected={setSelectedPair}\n               className=\"w-40\"\n             />\n-            <Select \n+            <Select\n               name=\"Granularity\"\n               title=\"Timeframe\"\n               options={options.granularities}\n@@ -134,9 +156,9 @@ function Dashboard() {\n               className=\"w-32\"\n             />\n           </div>\n-          \n+\n           {/* Load Button */}\n-          <Button \n+          <Button\n             text={loadingData ? \"Loading...\" : \"Load Data\"}\n             handleClick={() => loadTechnicals()}\n             disabled={loadingData}\n@@ -144,7 +166,7 @@ function Dashboard() {\n             className={loadingData ? \"[&_svg]:animate-spin\" : \"\"}\n           />\n         </div>\n-        \n+\n         {/* Selected Info Badge */}\n         {selectedPair && selectedGran && (\n           <div className=\"mt-4 pt-4 border-t border-border\">\n@@ -197,7 +219,7 @@ function Dashboard() {\n               <Technicals data={technicalsData} />\n             </div>\n           )}\n-          \n+\n           {/* Price Chart - Main area */}\n           {priceData && (\n             <div className=\"xl:col-span-2 xl:order-1\">\n@@ -207,6 +229,12 @@ function Dashboard() {\n                 selectedGranularity={selectedGran}\n                 handleCountChange={handleCountChange}\n                 priceData={priceData}\n+                chartType={chartType}\n+                onChartTypeChange={handleChartTypeChange}\n+                showVolume={showVolume}\n+                onVolumeToggle={handleVolumeToggle}\n+                selectedDateRange={selectedDateRange}\n+                onDateRangeChange={handleDateRangeChange}\n               />\n             </div>\n           )}\ndiff --git a/app/server/config/settings.py b/app/server/config/settings.py\nindex 35a616a..78f0059 100644\n--- a/app/server/config/settings.py\n+++ b/app/server/config/settings.py\n@@ -59,6 +59,7 @@ TFS: Dict[str, int] = {\n     \"M5\": 300,\n     \"M15\": 900,\n     \"H1\": 3600,\n+    \"H4\": 14400,\n     \"D\": 86400\n }",
          "is_error": false
        }
      ]
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "1f785384-37fa-492c-99df-daec502d2708",
    "tool_use_result": {
      "stdout": "diff --git a/app/client/src/app/chart.js b/app/client/src/app/chart.js\nindex 178e8a8..f2a759e 100644\n--- a/app/client/src/app/chart.js\n+++ b/app/client/src/app/chart.js\n@@ -7,10 +7,17 @@ const CHART_COLORS = {\n   grid: 'rgba(228, 228, 231, 0.3)',\r\n   text: '#71717A',         // Muted foreground\r\n   background: 'transparent',\r\n+  volumeBullish: 'rgba(34, 197, 94, 0.5)',  // Semi-transparent green\r\n+  volumeBearish: 'rgba(239, 68, 68, 0.5)',  // Semi-transparent red\r\n+  line: '#3B82F6',         // Blue for line chart\r\n+  areaFill: 'rgba(59, 130, 246, 0.2)',      // Semi-transparent blue\r\n };\r\n \r\n-export function drawChart(chartData, p, g, divName) {\r\n-  const trace = {\r\n+/**\r\n+ * Create a candlestick trace\r\n+ */\r\n+function createCandlestickTrace(chartData, pairName) {\r\n+  return {\r\n     x: chartData.time,\r\n     close: chartData.mid_c,\r\n     high: chartData.mid_h,\r\n@@ -19,18 +26,157 @@ export function drawChart(chartData, p, g, divName) {\n     type: 'candlestick',\r\n     xaxis: 'x',\r\n     yaxis: 'y',\r\n-    increasing: { \r\n-      line: { width: 1, color: CHART_COLORS.bullish }, \r\n-      fillcolor: CHART_COLORS.bullish \r\n+    increasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bullish },\r\n+      fillcolor: CHART_COLORS.bullish\r\n     },\r\n-    decreasing: { \r\n-      line: { width: 1, color: CHART_COLORS.bearish }, \r\n-      fillcolor: CHART_COLORS.bearish \r\n+    decreasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bearish },\r\n+      fillcolor: CHART_COLORS.bearish\r\n     },\r\n-    name: p,\r\n+    name: pairName,\r\n   };\r\n+}\r\n+\r\n+/**\r\n+ * Create an OHLC trace\r\n+ */\r\n+function createOHLCTrace(chartData, pairName) {\r\n+  return {\r\n+    x: chartData.time,\r\n+    close: chartData.mid_c,\r\n+    high: chartData.mid_h,\r\n+    low: chartData.mid_l,\r\n+    open: chartData.mid_o,\r\n+    type: 'ohlc',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y',\r\n+    increasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bullish }\r\n+    },\r\n+    decreasing: {\r\n+      line: { width: 1, color: CHART_COLORS.bearish }\r\n+    },\r\n+    name: pairName,\r\n+  };\r\n+}\r\n+\r\n+/**\r\n+ * Create a line trace (uses close prices)\r\n+ */\r\n+function createLineTrace(chartData, pairName) {\r\n+  return {\r\n+    x: chartData.time,\r\n+    y: chartData.mid_c,\r\n+    type: 'scatter',\r\n+    mode: 'lines',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y',\r\n+    line: {\r\n+      color: CHART_COLORS.line,\r\n+      width: 2,\r\n+    },\r\n+    name: pairName,\r\n+  };\r\n+}\r\n \r\n-  const data = [trace];\r\n+/**\r\n+ * Create an area trace (line with filled area below)\r\n+ */\r\n+function createAreaTrace(chartData, pairName) {\r\n+  return {\r\n+    x: chartData.time,\r\n+    y: chartData.mid_c,\r\n+    type: 'scatter',\r\n+    mode: 'lines',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y',\r\n+    fill: 'tozeroy',\r\n+    fillcolor: CHART_COLORS.areaFill,\r\n+    line: {\r\n+      color: CHART_COLORS.line,\r\n+      width: 2,\r\n+    },\r\n+    name: pairName,\r\n+  };\r\n+}\r\n+\r\n+/**\r\n+ * Create the main price trace based on chart type\r\n+ */\r\n+function createPriceTrace(chartData, pairName, chartType) {\r\n+  switch (chartType) {\r\n+    case 'ohlc':\r\n+      return createOHLCTrace(chartData, pairName);\r\n+    case 'line':\r\n+      return createLineTrace(chartData, pairName);\r\n+    case 'area':\r\n+      return createAreaTrace(chartData, pairName);\r\n+    case 'candlestick':\r\n+    default:\r\n+      return createCandlestickTrace(chartData, pairName);\r\n+  }\r\n+}\r\n+\r\n+/**\r\n+ * Create volume trace with color coding based on price direction\r\n+ * Note: OpenFX API may not provide volume data. If not available,\r\n+ * we calculate a proxy volume based on candle range (high - low).\r\n+ */\r\n+function createVolumeTrace(chartData) {\r\n+  const volumes = [];\r\n+  const colors = [];\r\n+\r\n+  for (let i = 0; i < chartData.time.length; i++) {\r\n+    // Use actual volume if available, otherwise calculate proxy from price range\r\n+    const volume = chartData.volume?.[i] ??\r\n+      Math.abs(chartData.mid_h[i] - chartData.mid_l[i]) * 1000000;\r\n+    volumes.push(volume);\r\n+\r\n+    // Color based on whether close > open (bullish) or close < open (bearish)\r\n+    const isBullish = chartData.mid_c[i] >= chartData.mid_o[i];\r\n+    colors.push(isBullish ? CHART_COLORS.volumeBullish : CHART_COLORS.volumeBearish);\r\n+  }\r\n+\r\n+  return {\r\n+    x: chartData.time,\r\n+    y: volumes,\r\n+    type: 'bar',\r\n+    xaxis: 'x',\r\n+    yaxis: 'y2',\r\n+    marker: {\r\n+      color: colors,\r\n+    },\r\n+    name: 'Volume',\r\n+    hovertemplate: 'Volume: %{y:,.0f}<extra></extra>',\r\n+  };\r\n+}\r\n+\r\n+/**\r\n+ * Draw the chart with support for multiple chart types, volume subplot, and advanced interactions.\r\n+ * @param {Object} chartData - The chart data with time, mid_o, mid_h, mid_l, mid_c, and optionally volume\r\n+ * @param {string} p - Pair name (e.g., \"EUR_USD\")\r\n+ * @param {string} g - Granularity (e.g., \"H1\")\r\n+ * @param {string} divName - The ID of the div element to render the chart in\r\n+ * @param {string} chartType - Chart type: 'candlestick', 'ohlc', 'line', or 'area'\r\n+ * @param {boolean} showVolume - Whether to show the volume subplot\r\n+ */\r\n+export function drawChart(chartData, p, g, divName, chartType = 'candlestick', showVolume = false) {\r\n+  const data = [];\r\n+\r\n+  // Add main price trace\r\n+  const priceTrace = createPriceTrace(chartData, p, chartType);\r\n+  data.push(priceTrace);\r\n+\r\n+  // Add volume trace if enabled\r\n+  if (showVolume) {\r\n+    const volumeTrace = createVolumeTrace(chartData);\r\n+    data.push(volumeTrace);\r\n+  }\r\n+\r\n+  // Calculate y-axis domain based on whether volume is shown\r\n+  const priceYAxisDomain = showVolume ? [0.25, 1] : [0, 1];\r\n+  const volumeYAxisDomain = [0, 0.2];\r\n \r\n   const layout = {\r\n     title: {\r\n@@ -48,7 +194,7 @@ export function drawChart(chartData, p, g, divName) {\n     showlegend: false,\r\n     margin: {\r\n       l: 60,\r\n-      r: 20,\r\n+      r: 60,\r\n       b: 50,\r\n       t: 50,\r\n       pad: 4,\r\n@@ -69,6 +215,13 @@ export function drawChart(chartData, p, g, divName) {\n       },\r\n       linecolor: CHART_COLORS.grid,\r\n       linewidth: 1,\r\n+      // Crosshair spike line configuration\r\n+      showspikes: true,\r\n+      spikemode: 'across',\r\n+      spikesnap: 'cursor',\r\n+      spikecolor: '#71717A',\r\n+      spikethickness: 1,\r\n+      spikedash: 'dot',\r\n     },\r\n     yaxis: {\r\n       side: 'right',\r\n@@ -83,7 +236,16 @@ export function drawChart(chartData, p, g, divName) {\n       linecolor: CHART_COLORS.grid,\r\n       linewidth: 1,\r\n       tickformat: '.5f',\r\n+      domain: priceYAxisDomain,\r\n+      // Crosshair spike line configuration\r\n+      showspikes: true,\r\n+      spikemode: 'across',\r\n+      spikesnap: 'cursor',\r\n+      spikecolor: '#71717A',\r\n+      spikethickness: 1,\r\n+      spikedash: 'dot',\r\n     },\r\n+    // Configure hover mode for crosshair effect\r\n     hovermode: 'x unified',\r\n     hoverlabel: {\r\n       bgcolor: '#18181B',\r\n@@ -94,8 +256,35 @@ export function drawChart(chartData, p, g, divName) {\n         color: '#FAFAFA',\r\n       },\r\n     },\r\n+    // Enable drag mode for panning\r\n+    dragmode: 'pan',\r\n   };\r\n \r\n+  // Add volume y-axis if showing volume\r\n+  if (showVolume) {\r\n+    layout.yaxis2 = {\r\n+      side: 'right',\r\n+      showgrid: false,\r\n+      tickfont: {\r\n+        family: 'JetBrains Mono, monospace',\r\n+        size: 10,\r\n+        color: CHART_COLORS.text,\r\n+      },\r\n+      linecolor: CHART_COLORS.grid,\r\n+      linewidth: 1,\r\n+      domain: volumeYAxisDomain,\r\n+      tickformat: '.2s',\r\n+      title: {\r\n+        text: 'Vol',\r\n+        font: {\r\n+          size: 10,\r\n+          color: CHART_COLORS.text,\r\n+        },\r\n+        standoff: 5,\r\n+      },\r\n+    };\r\n+  }\r\n+\r\n   const config = {\r\n     responsive: true,\r\n     displayModeBar: true,\r\n@@ -105,10 +294,14 @@ export function drawChart(chartData, p, g, divName) {\n       format: 'png',\r\n       filename: `${p}_${g}_chart`,\r\n     },\r\n+    // Enable scroll zoom for mouse wheel zoom\r\n+    scrollZoom: true,\r\n+    // Double-click to reset zoom\r\n+    doubleClick: 'reset',\r\n   };\r\n \r\n   Plotly.newPlot(divName, data, layout, config);\r\n-  \r\n+\r\n   // Resize to fit container\r\n   const chartElement = document.getElementById(divName);\r\n   if (chartElement) {\r\ndiff --git a/app/client/src/app/data.js b/app/client/src/app/data.js\nindex a7ed3b7..9a2ca22 100644\n--- a/app/client/src/app/data.js\n+++ b/app/client/src/app/data.js\n@@ -14,6 +14,83 @@ export const COUNTS = [\n     { key: \"200\", text: \"200\", value:  \"200\" }\r\n ];\r\n \r\n+// Chart type options for the chart type selector\r\n+export const CHART_TYPES = [\r\n+    { key: \"candlestick\", text: \"Candlestick\", value: \"candlestick\" },\r\n+    { key: \"ohlc\", text: \"OHLC\", value: \"ohlc\" },\r\n+    { key: \"line\", text: \"Line\", value: \"line\" },\r\n+    { key: \"area\", text: \"Area\", value: \"area\" }\r\n+];\r\n+\r\n+// Date range presets for quick time navigation\r\n+export const DATE_RANGES = [\r\n+    { key: \"1D\", text: \"1D\", value: \"1D\" },\r\n+    { key: \"5D\", text: \"5D\", value: \"5D\" },\r\n+    { key: \"1M\", text: \"1M\", value: \"1M\" },\r\n+    { key: \"3M\", text: \"3M\", value: \"3M\" },\r\n+    { key: \"6M\", text: \"6M\", value: \"6M\" },\r\n+    { key: \"YTD\", text: \"YTD\", value: \"YTD\" },\r\n+    { key: \"1Y\", text: \"1Y\", value: \"1Y\" },\r\n+    { key: \"All\", text: \"All\", value: \"All\" }\r\n+];\r\n+\r\n+// Timeframe to seconds mapping (matches server TFS)\r\n+const GRANULARITY_SECONDS = {\r\n+    \"M5\": 300,\r\n+    \"M15\": 900,\r\n+    \"H1\": 3600,\r\n+    \"H4\": 14400,\r\n+    \"D\": 86400\r\n+};\r\n+\r\n+/**\r\n+ * Calculate the number of candles needed for a given date range and granularity.\r\n+ * @param {string} dateRange - Date range preset (1D, 5D, 1M, 3M, 6M, YTD, 1Y, All)\r\n+ * @param {string} granularity - Timeframe (M5, M15, H1, H4, D)\r\n+ * @returns {number} Number of candles to fetch\r\n+ */\r\n+export function calculateCandleCount(dateRange, granularity) {\r\n+    const secondsPerGranularity = GRANULARITY_SECONDS[granularity] || 3600;\r\n+    const now = new Date();\r\n+    let startDate;\r\n \r\n+    switch (dateRange) {\r\n+        case \"1D\":\r\n+            startDate = new Date(now.getTime() - 24 * 60 * 60 * 1000);\r\n+            break;\r\n+        case \"5D\":\r\n+            startDate = new Date(now.getTime() - 5 * 24 * 60 * 60 * 1000);\r\n+            break;\r\n+        case \"1M\":\r\n+            startDate = new Date(now);\r\n+            startDate.setMonth(startDate.getMonth() - 1);\r\n+            break;\r\n+        case \"3M\":\r\n+            startDate = new Date(now);\r\n+            startDate.setMonth(startDate.getMonth() - 3);\r\n+            break;\r\n+        case \"6M\":\r\n+            startDate = new Date(now);\r\n+            startDate.setMonth(startDate.getMonth() - 6);\r\n+            break;\r\n+        case \"YTD\":\r\n+            startDate = new Date(now.getFullYear(), 0, 1);\r\n+            break;\r\n+        case \"1Y\":\r\n+            startDate = new Date(now);\r\n+            startDate.setFullYear(startDate.getFullYear() - 1);\r\n+            break;\r\n+        case \"All\":\r\n+            // Return a large number for \"All\" to get maximum available data\r\n+            return 1000;\r\n+        default:\r\n+            return 100;\r\n+    }\r\n \r\n+    // Calculate the number of seconds between start and now\r\n+    const durationSeconds = (now.getTime() - startDate.getTime()) / 1000;\r\n \r\n+    // Calculate candle count and ensure minimum of 10 and maximum of 1000\r\n+    const candleCount = Math.floor(durationSeconds / secondsPerGranularity);\r\n+    return Math.max(10, Math.min(1000, candleCount));\r\n+}\r\ndiff --git a/app/client/src/components/PriceChart.jsx b/app/client/src/components/PriceChart.jsx\nindex 6a0389f..d943077 100644\n--- a/app/client/src/components/PriceChart.jsx\n+++ b/app/client/src/components/PriceChart.jsx\n@@ -1,22 +1,28 @@\n import React, { useEffect } from 'react';\n import Select from './Select';\n-import { COUNTS } from '../app/data';\n+import { COUNTS, CHART_TYPES, DATE_RANGES } from '../app/data';\n import { drawChart } from '../app/chart';\n-import { LineChart } from 'lucide-react';\n+import { LineChart, BarChart2 } from 'lucide-react';\n \n-function PriceChart({ \n-  priceData, \n-  selectedPair, \n+function PriceChart({\n+  priceData,\n+  selectedPair,\n   selectedGranularity,\n-  selectedCount, \n-  handleCountChange \n+  selectedCount,\n+  handleCountChange,\n+  chartType,\n+  onChartTypeChange,\n+  showVolume,\n+  onVolumeToggle,\n+  selectedDateRange,\n+  onDateRangeChange\n }) {\n   useEffect(() => {\n     if (priceData) {\n-      drawChart(priceData, selectedPair, selectedGranularity, 'chartDiv');\n+      drawChart(priceData, selectedPair, selectedGranularity, 'chartDiv', chartType, showVolume);\n     }\n-  }, [priceData, selectedPair, selectedGranularity]);\n-  \n+  }, [priceData, selectedPair, selectedGranularity, chartType, showVolume]);\n+\n   return (\n     <div className=\"card animate-fade-in\">\n       {/* Header */}\n@@ -33,9 +39,21 @@ function PriceChart({\n               </p>\n             </div>\n           </div>\n-          \n+\n           {/* Chart Controls */}\n-          <div className=\"flex items-center gap-3\">\n+          <div className=\"flex items-center gap-3 flex-wrap\">\n+            {/* Chart Type Selector */}\n+            <Select\n+              name=\"chartType\"\n+              title=\"Chart Type\"\n+              options={CHART_TYPES}\n+              defaultValue={chartType}\n+              onSelected={onChartTypeChange}\n+              hideLabel\n+              className=\"w-32\"\n+            />\n+\n+            {/* Candle Count Selector */}\n             <Select\n               name=\"numrows\"\n               title=\"Candles\"\n@@ -45,14 +63,48 @@ function PriceChart({\n               hideLabel\n               className=\"w-24\"\n             />\n+\n+            {/* Volume Toggle */}\n+            <button\n+              onClick={onVolumeToggle}\n+              className={`inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${\n+                showVolume\n+                  ? 'bg-primary text-primary-foreground'\n+                  : 'bg-muted text-muted-foreground hover:bg-muted/80'\n+              }`}\n+              title={showVolume ? 'Hide Volume' : 'Show Volume'}\n+            >\n+              <BarChart2 className=\"h-4 w-4\" />\n+              <span className=\"hidden sm:inline\">Vol</span>\n+            </button>\n+          </div>\n+        </div>\n+\n+        {/* Date Range Buttons */}\n+        <div className=\"mt-4 pt-4 border-t border-border\">\n+          <div className=\"flex items-center gap-2 flex-wrap\">\n+            <span className=\"text-xs text-muted-foreground mr-2\">Range:</span>\n+            {DATE_RANGES.map((range) => (\n+              <button\n+                key={range.key}\n+                onClick={() => onDateRangeChange(range.value)}\n+                className={`px-3 py-1.5 rounded-md text-xs font-medium transition-colors ${\n+                  selectedDateRange === range.value\n+                    ? 'bg-primary text-primary-foreground'\n+                    : 'bg-muted text-muted-foreground hover:bg-muted/80 hover:text-foreground'\n+                }`}\n+              >\n+                {range.text}\n+              </button>\n+            ))}\n           </div>\n         </div>\n       </div>\n-      \n+\n       {/* Chart Container */}\n       <div className=\"p-4\">\n-        <div \n-          id=\"chartDiv\" \n+        <div\n+          id=\"chartDiv\"\n           className=\"w-full rounded-lg bg-muted/30 min-h-[500px]\"\n           style={{ height: 'calc(100vh - 450px)' }}\n         />\ndiff --git a/app/client/src/pages/Dashboard.jsx b/app/client/src/pages/Dashboard.jsx\nindex 3304750..18685fc 100644\n--- a/app/client/src/pages/Dashboard.jsx\n+++ b/app/client/src/pages/Dashboard.jsx\n@@ -1,6 +1,6 @@\n import React, { useEffect, useState } from 'react';\n import endPoints from '../app/api';\n-import { COUNTS } from '../app/data';\n+import { COUNTS, calculateCandleCount } from '../app/data';\n import Button from '../components/Button';\n import PriceChart from '../components/PriceChart';\n import Select from '../components/Select';\n@@ -18,15 +18,37 @@ function Dashboard() {\n   const [loadingData, setLoadingData] = useState(false);\n   const [error, setError] = useState(null);\n \n+  // New state for advanced chart features\n+  const [chartType, setChartType] = useState('candlestick');\n+  const [showVolume, setShowVolume] = useState(false);\n+  const [selectedDateRange, setSelectedDateRange] = useState(null);\n+\n   useEffect(() => {\n     loadOptions();\n   }, []);\n \n   const handleCountChange = (count) => {\n     setSelectedCount(count);\n+    setSelectedDateRange(null); // Clear date range when manually setting count\n     loadPrices(count);\n   };\n \n+  const handleChartTypeChange = (type) => {\n+    setChartType(type);\n+  };\n+\n+  const handleVolumeToggle = () => {\n+    setShowVolume(!showVolume);\n+  };\n+\n+  const handleDateRangeChange = (dateRange) => {\n+    setSelectedDateRange(dateRange);\n+    // Calculate the appropriate candle count based on date range and granularity\n+    const candleCount = calculateCandleCount(dateRange, selectedGran);\n+    setSelectedCount(String(candleCount));\n+    loadPrices(String(candleCount));\n+  };\n+\n   const loadOptions = async () => {\n     const data = await endPoints.options();\n     setOptions(data);\n@@ -117,7 +139,7 @@ function Dashboard() {\n         <div className=\"flex flex-col md:flex-row items-start md:items-end gap-4 flex-wrap\">\n           {/* Pair & Granularity Selectors */}\n           <div className=\"flex flex-wrap items-end gap-4\">\n-            <Select \n+            <Select\n               name=\"Currency\"\n               title=\"Currency Pair\"\n               options={options.pairs}\n@@ -125,7 +147,7 @@ function Dashboard() {\n               onSelected={setSelectedPair}\n               className=\"w-40\"\n             />\n-            <Select \n+            <Select\n               name=\"Granularity\"\n               title=\"Timeframe\"\n               options={options.granularities}\n@@ -134,9 +156,9 @@ function Dashboard() {\n               className=\"w-32\"\n             />\n           </div>\n-          \n+\n           {/* Load Button */}\n-          <Button \n+          <Button\n             text={loadingData ? \"Loading...\" : \"Load Data\"}\n             handleClick={() => loadTechnicals()}\n             disabled={loadingData}\n@@ -144,7 +166,7 @@ function Dashboard() {\n             className={loadingData ? \"[&_svg]:animate-spin\" : \"\"}\n           />\n         </div>\n-        \n+\n         {/* Selected Info Badge */}\n         {selectedPair && selectedGran && (\n           <div className=\"mt-4 pt-4 border-t border-border\">\n@@ -197,7 +219,7 @@ function Dashboard() {\n               <Technicals data={technicalsData} />\n             </div>\n           )}\n-          \n+\n           {/* Price Chart - Main area */}\n           {priceData && (\n             <div className=\"xl:col-span-2 xl:order-1\">\n@@ -207,6 +229,12 @@ function Dashboard() {\n                 selectedGranularity={selectedGran}\n                 handleCountChange={handleCountChange}\n                 priceData={priceData}\n+                chartType={chartType}\n+                onChartTypeChange={handleChartTypeChange}\n+                showVolume={showVolume}\n+                onVolumeToggle={handleVolumeToggle}\n+                selectedDateRange={selectedDateRange}\n+                onDateRangeChange={handleDateRangeChange}\n               />\n             </div>\n           )}\ndiff --git a/app/server/config/settings.py b/app/server/config/settings.py\nindex 35a616a..78f0059 100644\n--- a/app/server/config/settings.py\n+++ b/app/server/config/settings.py\n@@ -59,6 +59,7 @@ TFS: Dict[str, int] = {\n     \"M5\": 300,\n     \"M15\": 900,\n     \"H1\": 3600,\n+    \"H4\": 14400,\n     \"D\": 86400\n }",
      "stderr": "",
      "interrupted": false,
      "isImage": false
    }
  },
  {
    "type": "user",
    "message": {
      "role": "user",
      "content": [
        {
          "tool_use_id": "toolu_017ivhVwi6jwx6EgKFwEKTAj",
          "type": "tool_result",
          "content": "On branch feature-issue-5-adw-e2a5d817-advanced-trading-chart\nYour branch is up to date with 'origin/feature-issue-5-adw-e2a5d817-advanced-trading-chart'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   app/client/src/app/chart.js\n\tmodified:   app/client/src/app/data.js\n\tmodified:   app/client/src/components/PriceChart.jsx\n\tmodified:   app/client/src/pages/Dashboard.jsx\n\tmodified:   app/server/config/settings.py\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\t.claude/commands/e2e/test_advanced_chart.md\n\t.playwright-mcp/01_home_page.png\n\t.playwright-mcp/02_dashboard_initial.png\n\t.playwright-mcp/03_chart_loaded_with_controls.png\n\t.playwright-mcp/04_line_chart.png\n\t.playwright-mcp/05_area_chart.png\n\t.playwright-mcp/06_ohlc_chart.png\n\t.playwright-mcp/07_volume_enabled.png\n\t.playwright-mcp/08_1month_range.png\n\t.playwright-mcp/09_h4_timeframe.png\n\tagents/e2a5d817/pr_creator/\n\tagents/e2a5d817/sdlc_implementor/\n\tagents/e2a5d817/sdlc_implementor_committer/\n\tvideos/576b49a454fb80f24721c438c6ccf69d.webm\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")",
          "is_error": false
        }
      ]
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "9380714f-8c9e-4e92-b555-2b9c5efec240",
    "tool_use_result": {
      "stdout": "On branch feature-issue-5-adw-e2a5d817-advanced-trading-chart\nYour branch is up to date with 'origin/feature-issue-5-adw-e2a5d817-advanced-trading-chart'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git restore <file>...\" to discard changes in working directory)\n\tmodified:   app/client/src/app/chart.js\n\tmodified:   app/client/src/app/data.js\n\tmodified:   app/client/src/components/PriceChart.jsx\n\tmodified:   app/client/src/pages/Dashboard.jsx\n\tmodified:   app/server/config/settings.py\n\nUntracked files:\n  (use \"git add <file>...\" to include in what will be committed)\n\t.claude/commands/e2e/test_advanced_chart.md\n\t.playwright-mcp/01_home_page.png\n\t.playwright-mcp/02_dashboard_initial.png\n\t.playwright-mcp/03_chart_loaded_with_controls.png\n\t.playwright-mcp/04_line_chart.png\n\t.playwright-mcp/05_area_chart.png\n\t.playwright-mcp/06_ohlc_chart.png\n\t.playwright-mcp/07_volume_enabled.png\n\t.playwright-mcp/08_1month_range.png\n\t.playwright-mcp/09_h4_timeframe.png\n\tagents/e2a5d817/pr_creator/\n\tagents/e2a5d817/sdlc_implementor/\n\tagents/e2a5d817/sdlc_implementor_committer/\n\tvideos/576b49a454fb80f24721c438c6ccf69d.webm\n\nno changes added to commit (use \"git add\" and/or \"git commit -a\")",
      "stderr": "",
      "interrupted": false,
      "isImage": false
    }
  },
  {
    "type": "assistant",
    "message": {
      "model": "claude-sonnet-4-5-20250929",
      "id": "msg_01DPWSbgvQB5DFoFAVnCaYDc",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "tool_use",
          "id": "toolu_01QSAUL2YFSxdBmxDuktnkdn",
          "name": "Bash",
          "input": {
            "command": "git add -A",
            "description": "Stage all changes including untracked files"
          }
        }
      ],
      "stop_reason": null,
      "stop_sequence": null,
      "usage": {
        "input_tokens": 7,
        "cache_creation_input_tokens": 7501,
        "cache_read_input_tokens": 23984,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 7501,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 25,
        "service_tier": "standard"
      },
      "context_management": null
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "7a947890-2e3a-411a-ab48-dee1c366220c"
  },
  {
    "type": "assistant",
    "message": {
      "model": "claude-sonnet-4-5-20250929",
      "id": "msg_01DPWSbgvQB5DFoFAVnCaYDc",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "tool_use",
          "id": "toolu_01AH5935N1bN1ichitso12bd",
          "name": "Bash",
          "input": {
            "command": "git commit -m \"sdlc_implementor: feature: add advanced trading chart\"",
            "description": "Create commit for advanced trading chart implementation"
          }
        }
      ],
      "stop_reason": null,
      "stop_sequence": null,
      "usage": {
        "input_tokens": 7,
        "cache_creation_input_tokens": 7501,
        "cache_read_input_tokens": 23984,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 7501,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 25,
        "service_tier": "standard"
      },
      "context_management": null
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "2220e858-e64d-4036-b3f1-70d536489f42"
  },
  {
    "type": "user",
    "message": {
      "role": "user",
      "content": [
        {
          "tool_use_id": "toolu_01QSAUL2YFSxdBmxDuktnkdn",
          "type": "tool_result",
          "content": "",
          "is_error": false
        }
      ]
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "b3c60b6e-764d-487e-8bd7-49d92414fe88",
    "tool_use_result": {
      "stdout": "",
      "stderr": "",
      "interrupted": false,
      "isImage": false
    }
  },
  {
    "type": "user",
    "message": {
      "role": "user",
      "content": [
        {
          "tool_use_id": "toolu_01AH5935N1bN1ichitso12bd",
          "type": "tool_result",
          "content": "[feature-issue-5-adw-e2a5d817-advanced-trading-chart ba36a1c] sdlc_implementor: feature: add advanced trading chart\n Committer: Maitrik Patel <maitrikpatel@Maitriks-MacBook-Pro.local>\nYour name and email address were configured automatically based\non your username and hostname. Please check that they are accurate.\nYou can suppress this message by setting them explicitly:\n\n    git config --global user.name \"Your Name\"\n    git config --global user.email you@example.com\n\nAfter doing this, you may fix the identity used for this commit with:\n\n    git commit --amend --reset-author\n\n 41 files changed, 8334 insertions(+), 34 deletions(-)\n create mode 100644 .claude/commands/e2e/test_advanced_chart.md\n create mode 100644 .playwright-mcp/01_home_page.png\n create mode 100644 .playwright-mcp/02_dashboard_initial.png\n create mode 100644 .playwright-mcp/03_chart_loaded_with_controls.png\n create mode 100644 .playwright-mcp/04_line_chart.png\n create mode 100644 .playwright-mcp/05_area_chart.png\n create mode 100644 .playwright-mcp/06_ohlc_chart.png\n create mode 100644 .playwright-mcp/07_volume_enabled.png\n create mode 100644 .playwright-mcp/08_1month_range.png\n create mode 100644 .playwright-mcp/09_h4_timeframe.png\n create mode 100644 agents/e2a5d817/pr_creator/prompts/pull_request.txt\n create mode 100644 agents/e2a5d817/pr_creator/raw_output.json\n create mode 100644 agents/e2a5d817/pr_creator/raw_output.jsonl\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_account_page_overview.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_dashboard_initial_state.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_home_page.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_initial_page_load.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_account_summary_working.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_chart_loaded_successfully.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_dashboard_initial.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_home_page_with_account_nav.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/03_account_page_full.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/03_chart_loaded_with_controls.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/03_technical_analysis_details.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/04_line_chart.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/05_area_chart.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/06_ohlc_chart.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/07_volume_enabled.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/08_1month_range.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/09_h4_timeframe.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/prompts/implement.txt\n create mode 100644 agents/e2a5d817/sdlc_implementor/raw_output.json\n create mode 100644 agents/e2a5d817/sdlc_implementor/raw_output.jsonl\n create mode 100644 agents/e2a5d817/sdlc_implementor_committer/prompts/commit.txt\n create mode 100644 agents/e2a5d817/sdlc_implementor_committer/raw_output.jsonl\n create mode 100644 videos/576b49a454fb80f24721c438c6ccf69d.webm",
          "is_error": false
        }
      ]
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "3b570de3-fb35-491f-af56-306189ad68a1",
    "tool_use_result": {
      "stdout": "[feature-issue-5-adw-e2a5d817-advanced-trading-chart ba36a1c] sdlc_implementor: feature: add advanced trading chart\n Committer: Maitrik Patel <maitrikpatel@Maitriks-MacBook-Pro.local>\nYour name and email address were configured automatically based\non your username and hostname. Please check that they are accurate.\nYou can suppress this message by setting them explicitly:\n\n    git config --global user.name \"Your Name\"\n    git config --global user.email you@example.com\n\nAfter doing this, you may fix the identity used for this commit with:\n\n    git commit --amend --reset-author\n\n 41 files changed, 8334 insertions(+), 34 deletions(-)\n create mode 100644 .claude/commands/e2e/test_advanced_chart.md\n create mode 100644 .playwright-mcp/01_home_page.png\n create mode 100644 .playwright-mcp/02_dashboard_initial.png\n create mode 100644 .playwright-mcp/03_chart_loaded_with_controls.png\n create mode 100644 .playwright-mcp/04_line_chart.png\n create mode 100644 .playwright-mcp/05_area_chart.png\n create mode 100644 .playwright-mcp/06_ohlc_chart.png\n create mode 100644 .playwright-mcp/07_volume_enabled.png\n create mode 100644 .playwright-mcp/08_1month_range.png\n create mode 100644 .playwright-mcp/09_h4_timeframe.png\n create mode 100644 agents/e2a5d817/pr_creator/prompts/pull_request.txt\n create mode 100644 agents/e2a5d817/pr_creator/raw_output.json\n create mode 100644 agents/e2a5d817/pr_creator/raw_output.jsonl\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_account_page_overview.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_dashboard_initial_state.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_home_page.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/01_initial_page_load.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_account_summary_working.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_chart_loaded_successfully.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_dashboard_initial.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/02_home_page_with_account_nav.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/03_account_page_full.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/03_chart_loaded_with_controls.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/03_technical_analysis_details.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/04_line_chart.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/05_area_chart.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/06_ohlc_chart.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/07_volume_enabled.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/08_1month_range.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/img/advanced_chart/09_h4_timeframe.png\n create mode 100644 agents/e2a5d817/sdlc_implementor/prompts/implement.txt\n create mode 100644 agents/e2a5d817/sdlc_implementor/raw_output.json\n create mode 100644 agents/e2a5d817/sdlc_implementor/raw_output.jsonl\n create mode 100644 agents/e2a5d817/sdlc_implementor_committer/prompts/commit.txt\n create mode 100644 agents/e2a5d817/sdlc_implementor_committer/raw_output.jsonl\n create mode 100644 videos/576b49a454fb80f24721c438c6ccf69d.webm",
      "stderr": "",
      "interrupted": false,
      "isImage": false
    }
  },
  {
    "type": "assistant",
    "message": {
      "model": "claude-sonnet-4-5-20250929",
      "id": "msg_01SLzMd4W78qPSyswxNuYfMQ",
      "type": "message",
      "role": "assistant",
      "content": [
        {
          "type": "text",
          "text": "sdlc_implementor: feature: add advanced trading chart"
        }
      ],
      "stop_reason": null,
      "stop_sequence": null,
      "usage": {
        "input_tokens": 7,
        "cache_creation_input_tokens": 1554,
        "cache_read_input_tokens": 31485,
        "cache_creation": {
          "ephemeral_5m_input_tokens": 1554,
          "ephemeral_1h_input_tokens": 0
        },
        "output_tokens": 1,
        "service_tier": "standard"
      },
      "context_management": null
    },
    "parent_tool_use_id": null,
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "uuid": "a0e9a75f-44fa-4b75-8425-5727d33f3cda"
  },
  {
    "type": "result",
    "subtype": "success",
    "is_error": false,
    "duration_ms": 12522,
    "duration_api_ms": 15329,
    "num_turns": 5,
    "result": "sdlc_implementor: feature: add advanced trading chart",
    "session_id": "807f9a67-eccb-472b-875e-a1f37bcec09e",
    "total_cost_usd": 0.11005675000000001,
    "usage": {
      "input_tokens": 17,
      "cache_creation_input_tokens": 19123,
      "cache_read_input_tokens": 69385,
      "output_tokens": 322,
      "server_tool_use": {
        "web_search_requests": 0,
        "web_fetch_requests": 0
      },
      "service_tier": "standard",
      "cache_creation": {
        "ephemeral_1h_input_tokens": 0,
        "ephemeral_5m_input_tokens": 19123
      }
    },
    "modelUsage": {
      "claude-sonnet-4-5-20250929": {
        "inputTokens": 17,
        "outputTokens": 322,
        "cacheReadInputTokens": 69385,
        "cacheCreationInputTokens": 19123,
        "webSearchRequests": 0,
        "costUSD": 0.09740774999999999,
        "contextWindow": 200000,
        "maxOutputTokens": 64000
      },
      "claude-haiku-4-5-20251001": {
        "inputTokens": 11654,
        "outputTokens": 199,
        "cacheReadInputTokens": 0,
        "cacheCreationInputTokens": 0,
        "webSearchRequests": 0,
        "costUSD": 0.012648999999999999,
        "contextWindow": 200000,
        "maxOutputTokens": 64000
      }
    },
    "permission_denials": [],
    "uuid": "d613acf7-da91-4a79-82c4-f0bac1b04c25"
  }
]